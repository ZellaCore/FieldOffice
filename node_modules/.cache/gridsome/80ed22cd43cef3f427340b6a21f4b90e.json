{"remainingRequest":"/home/ian/Codes/fo-git/FieldOffice/node_modules/babel-loader/lib/index.js??ref--1-1!/home/ian/Codes/fo-git/FieldOffice/node_modules/gridsome/app/page-query/index.js","dependencies":[{"path":"/home/ian/Codes/fo-git/FieldOffice/node_modules/gridsome/app/page-query/index.js","mtime":499162500000},{"path":"/home/ian/Codes/fo-git/FieldOffice/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ian/Codes/fo-git/FieldOffice/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport { getResults, formatError } from './shared';\nimport { NOT_FOUND_NAME, MODULE_NOT_FOUND } from '../utils/constants';\nvar merge = Vue.config.optionMergeStrategies;\nexport default (function (_ref) {\n  var options = _ref.options;\n  var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (options.__pageQuery) {\n    options.__pageQuery = query;\n    return;\n  }\n\n  options.__pageQuery = query;\n  options.computed = merge.computed({\n    $page: function $page() {\n      return process.isServer ? this.$ssrContext.pageQuery.data : getResults(this.$route.path);\n    }\n  }, options.computed);\n\n  if (process.isClient) {\n    var createRouteGuard = function createRouteGuard(hook) {\n      options[hook] = merge[hook]([createGuardFunc(options)], options[hook]);\n    };\n\n    var createGuardFunc = function createGuardFunc() {\n      return function (to, from, next) {\n        import(\n        /* webpackChunkName: \"page-query\" */\n        './fetch').then(function (m) {\n          m.default(to, options.__pageQuery).then(function (res) {\n            if (res.code === 404) {\n              next({\n                name: NOT_FOUND_NAME,\n                params: {\n                  0: to.path\n                }\n              });\n            } else {\n              next();\n            }\n          }).catch(function (err) {\n            if (err.code === MODULE_NOT_FOUND || err.code === 404) {\n              console.error(err); // eslint-disable-line\n\n              next({\n                name: NOT_FOUND_NAME,\n                params: {\n                  0: to.path\n                }\n              });\n            } else {\n              formatError(err, to);\n            }\n          });\n        });\n      };\n    };\n\n    createRouteGuard('beforeRouteEnter');\n    createRouteGuard('beforeRouteUpdate');\n  }\n});",{"version":3,"sources":["/home/ian/Codes/fo-git/FieldOffice/node_modules/gridsome/app/page-query/index.js"],"names":["Vue","getResults","formatError","NOT_FOUND_NAME","MODULE_NOT_FOUND","merge","config","optionMergeStrategies","options","query","__pageQuery","computed","$page","process","isServer","$ssrContext","pageQuery","data","$route","path","isClient","createRouteGuard","hook","createGuardFunc","to","from","next","then","m","default","res","code","name","params","catch","err","console","error"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,UAAxC;AACA,SAASC,cAAT,EAAyBC,gBAAzB,QAAiD,oBAAjD;AAEA,IAAMC,KAAK,GAAGL,GAAG,CAACM,MAAJ,CAAWC,qBAAzB;AAEA,gBAAe,gBAA+B;AAAA,MAA5BC,OAA4B,QAA5BA,OAA4B;AAAA,MAAjBC,KAAiB,uEAAT,IAAS;;AAC5C,MAAID,OAAO,CAACE,WAAZ,EAAyB;AACvBF,IAAAA,OAAO,CAACE,WAAR,GAAsBD,KAAtB;AACA;AACD;;AAEDD,EAAAA,OAAO,CAACE,WAAR,GAAsBD,KAAtB;AAEAD,EAAAA,OAAO,CAACG,QAAR,GAAmBN,KAAK,CAACM,QAAN,CAAe;AAChCC,IAAAA,KADgC,mBACvB;AACP,aAAOC,OAAO,CAACC,QAAR,GACH,KAAKC,WAAL,CAAiBC,SAAjB,CAA2BC,IADxB,GAEHhB,UAAU,CAAC,KAAKiB,MAAL,CAAYC,IAAb,CAFd;AAGD;AAL+B,GAAf,EAMhBX,OAAO,CAACG,QANQ,CAAnB;;AAQA,MAAIE,OAAO,CAACO,QAAZ,EAAsB;AACpB,QAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,IAAI,EAAI;AAC/Bd,MAAAA,OAAO,CAACc,IAAD,CAAP,GAAgBjB,KAAK,CAACiB,IAAD,CAAL,CAAY,CAACC,eAAe,CAACf,OAAD,CAAhB,CAAZ,EAAwCA,OAAO,CAACc,IAAD,CAA/C,CAAhB;AACD,KAFD;;AAIA,QAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,aAAO,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACzB;AAAO;AAAqC,iBAA5C,EAAuDC,IAAvD,CAA4D,UAAAC,CAAC,EAAI;AAC/DA,UAAAA,CAAC,CAACC,OAAF,CAAUL,EAAV,EAAchB,OAAO,CAACE,WAAtB,EACGiB,IADH,CACQ,UAAAG,GAAG,EAAI;AACX,gBAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;AACpBL,cAAAA,IAAI,CAAC;AAAEM,gBAAAA,IAAI,EAAE7B,cAAR;AAAwB8B,gBAAAA,MAAM,EAAE;AAAE,qBAAGT,EAAE,CAACL;AAAR;AAAhC,eAAD,CAAJ;AACD,aAFD,MAEO;AACLO,cAAAA,IAAI;AACL;AACF,WAPH,EAQGQ,KARH,CAQS,UAAAC,GAAG,EAAI;AACZ,gBAAIA,GAAG,CAACJ,IAAJ,KAAa3B,gBAAb,IAAiC+B,GAAG,CAACJ,IAAJ,KAAa,GAAlD,EAAuD;AACrDK,cAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd,EADqD,CAClC;;AACnBT,cAAAA,IAAI,CAAC;AAAEM,gBAAAA,IAAI,EAAE7B,cAAR;AAAwB8B,gBAAAA,MAAM,EAAE;AAAE,qBAAGT,EAAE,CAACL;AAAR;AAAhC,eAAD,CAAJ;AACD,aAHD,MAGO;AACLjB,cAAAA,WAAW,CAACiC,GAAD,EAAMX,EAAN,CAAX;AACD;AACF,WAfH;AAgBD,SAjBD;AAkBD,OAnBD;AAoBD,KArBD;;AAuBAH,IAAAA,gBAAgB,CAAC,kBAAD,CAAhB;AACAA,IAAAA,gBAAgB,CAAC,mBAAD,CAAhB;AACD;AACF,CA/CD","sourcesContent":["import Vue from 'vue'\nimport { getResults, formatError } from './shared'\nimport { NOT_FOUND_NAME, MODULE_NOT_FOUND } from '../utils/constants'\n\nconst merge = Vue.config.optionMergeStrategies\n\nexport default ({ options }, query = true) => {\n  if (options.__pageQuery) {\n    options.__pageQuery = query\n    return\n  }\n\n  options.__pageQuery = query\n\n  options.computed = merge.computed({\n    $page () {\n      return process.isServer\n        ? this.$ssrContext.pageQuery.data\n        : getResults(this.$route.path)\n    }\n  }, options.computed)\n\n  if (process.isClient) {\n    const createRouteGuard = hook => {\n      options[hook] = merge[hook]([createGuardFunc(options)], options[hook])\n    }\n\n    const createGuardFunc = () => {\n      return (to, from, next) => {\n        import(/* webpackChunkName: \"page-query\" */ './fetch').then(m => {\n          m.default(to, options.__pageQuery)\n            .then(res => {\n              if (res.code === 404) {\n                next({ name: NOT_FOUND_NAME, params: { 0: to.path }})\n              } else {\n                next()\n              }\n            })\n            .catch(err => {\n              if (err.code === MODULE_NOT_FOUND || err.code === 404) {\n                console.error(err) // eslint-disable-line\n                next({ name: NOT_FOUND_NAME, params: { 0: to.path }})\n              } else {\n                formatError(err, to)\n              }\n            })\n        })\n      }\n    }\n\n    createRouteGuard('beforeRouteEnter')\n    createRouteGuard('beforeRouteUpdate')\n  }\n}\n"]}]}